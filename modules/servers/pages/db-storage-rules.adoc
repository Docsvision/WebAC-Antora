:rules:

= Настроить правила помещения в хранилище

Администратор должен настроить правила, в соответствии с которыми файлы будут распределяться между группами хранилищ.

.Хранилище, состоящее в группе хранилищ не будет использоваться для сохранения файлов, если эта группа хранилищ:
* Не участвует в правилах.
* Не является xref:db-storage-default.adoc[группой хранилищ по умолчанию] для какого-либо типа файлов.
* Не входит в другие группы.

[#rules]
== Настройка правил помещения в хранилища

.Чтобы настроить правила помещения в хранилища:
include::partial$excerpts.adoc[tags=openStorages]
+
.Окно настройки правила выбора группы хранилищ
image::dev@platform:admin:create-storage-rule.png[Окно настройки правила выбора группы хранилищ]
+
. Настройте параметры правила помещения в хранилища (все поля являются обязательными).
+
****
.. В поле _Название_ введите уникальное имя правила. Название правила должно быть уникальным. Если название совпадает с другим, при сохранении появляется ошибка: `Правило с таким названием уже существует`.
.. В раскрывающемся списке _Группа_ выберите группу хранилищ, которая будет выбираться согласно данному правилу:
+
* Общий -- общая группа хранилищ.
* Temp on FileSystem group -- хранилище в файловой системе.
+
.. В раскрывающемся списке _Тип_ выберите тип условия в правиле:
+
* *_Все файлы_* -- условию будет соответствовать любой файл без ограничений (значение по умолчанию).
* *_По расширению файла_* -- условию будет соответствовать файл с определённым расширением. Можно указать несколько расширений.
* *_Файл с размером большим, чем_* -- условию будет соответствовать файл с размером, превышающим заданное значение.
* *_Файл с размером меньшим, чем_* -- условию будет соответствовать файл с размером, не превышающим заданное значение.
* *_Файл справочника_* -- условию будет соответствовать файл справочника {dv}. Например, файл разметки, файл представления, иконка и другие.
* *_Системный файл_* -- условию будет соответствовать файл с установленным признаком "Системный".
* *_Добавить из сборки…_* -- алгоритм условия должен быть реализован в выбранном компоненте (файл `.dll`).
****
+
. Укажите дополнительные настройки правила.
+
****
.Для типа "По расширению файла":
* _Расширение_ файлов, выбираемых по данному условию. Расширения перечисляются через символ `;`.

.Для типа "Файл с размером большим чем":
* _Размер, kB_ -- минимальный размер файлов (в Кб), которые соответствуют условию.

.Для типа "Файл с размером меньшим чем":
* _Размер, kB_ -- максимальный размер файлов (в Кб), которые соответствуют условию.

.Для типа "Добавить из сборки":
* Путь -- при выборе варианта *_Добавить из сборки_* открывается окно выбора файла из файловой системы. Можно выбрать только файл `.dll`. После выбора ниже поля _Тип_ появляется строка с указанием пути к файлу. Если тип был отредактирован, строка исчезает.
****
+
. Нажмите кнопку *Сохранить*, чтобы добавить правило в список.

[#priority]
== Изменение приоритета использования правила

Правила применяются последовательно сверху вниз. Перетащите правило наверх, чтобы повысить его приоритет. Если правило не содержит групп хранилищ, оно будет пропущено. Если условия выполняются одновременно в нескольких правилах, будет выбрана группа хранилищ из правила с более высоким приоритетом.

include::partial$excerpts.adoc[tags=no-ten-min]

[#edit-rule]
== Изменение настроек правила

.Чтобы изменить настройки правила:
. Выберите правило в колонке _Правила помещения в хранилища_ и нажмите на его название.
+
. В появившемся окне настроек отредактируйте и сохраните изменения. Изменить тип правила нельзя.

[#delete-rule]
== Удаление правила

.Чтобы удалить правило:
. Найдите правило в списке _Правила помещения в хранилища_ и нажмите на кнопку image:buttons/x.png[Крест] в правой части строки. При нажатии кнопки удаления появляется окно с сообщением: `Вы уверены, что хотите удалить правило?` и кнопками *Да* / *Нет*.
. После подтверждения правило удаляется.
