= Настроить размещение служебных таблиц

Администратор может настроить место размещения служебных таблиц, используемых сервером {dv} для хранения временных данных: внутренних курсоров, курсоров для работы с файлами и иконками, промежуточных данных представлений, результатов поисковых запросов и прочими.

.В качестве хранилища служебных таблиц могут быть выбраны:
* БД {dv}.
* xref:db-satellite.adoc[Сателлитная] база данных, предназначенная для системных таблиц (`Название-БД-Docsvision_Metadata`).
* База данных `tempdb`.
* https://docs.microsoft.com/ru-ru/sql/relational-databases/in-memory-oltp/in-memory-oltp-in-memory-optimization[Таблица в памяти].

Использование внешних баз данных для хранения служебных таблиц позволяет облегчить обслуживание основной базы {dv}, сократить время на создание её резервных копий и т.п.

.Чтобы настроить размещение служебных таблиц:
* При создании или подключении БД раскройте блок _Опции_ на странице настройки параметров создания БД или настройте параметры в блоке _Опции_ при настройке xref:db-config.adoc#options[свойств БД]. Для каждой служебной таблицы можно индивидуально указать место размещения.
+
.Блок настроек "Опции"
image::dev@platform:admin:db-advanced-settings.png[Блок настроек "Опции]
+
.Настройка размещения служебных таблиц осуществляется с помощью следующих параметров:
** `ChangedObjectDataBaseType` -- определяет расположение временных таблиц с изменениями объектов.
** `CursorDataBaseType` -- определяет расположение временных таблиц с внутренними курсорами.
** `FileCursorDataBaseType` -- определяет расположение временных таблиц с файловыми курсорами.
** `IconDataBaseType` -- определяет расположение временных таблиц с иконками.
** `KeysetDataBaseType` -- определяет расположение временных таблиц представлений.
** `SearchDataBaseType` -- определяет расположение временных таблиц с данными поисковых запросов.

.Место размещения может принимать одно из следующих значений:
* *UseDefaultOrCurrent* -- использовать текущее значение или значение по умолчанию.
+
[NOTE]
====
Для новой БД и БД {dv} версии 5.4: таблица с файловыми курсорами будет храниться в собственной БД {dv}, остальные временные таблицы -- в базе данных `tempdb`.
====
+
include::db-config.adoc[tags=adv-options]

[NOTE]
====
Если расположение служебных таблиц было изменено после завершения первоначальной настройки {dv}, будет запущена хранимая процедура *ObjectValidation*. Максимальное время выполнения данной процедуры -- `3 часа`.

Если при сохранении возникает ошибка превышения времени ожидания, задайте большее значение на в группе "xref:db-config.adoc#maintenance[Обслуживание]" в параметре `Таймаут`.

При установке значения действует следующее правило: если установлено значение `30 минут` или меньше, для хранимой процедуры *ObjectValidation* действует ограничение -- `3 часа`. В остальных случаях -- используется установленное в параметре `Таймаут` значение. После завершения работы процедуры рекомендуется вернуть для настройки `Таймаут` значение по умолчанию -- `600 секунд`.
====
