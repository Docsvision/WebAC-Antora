= Преобразовать динамические метаданные в расширенные

Система {dv} предоставляет возможность добавлять в карточку новые секции и поля с помощью _Конструктора разметок_. Такое добавление секций и полей не изменяет схемы метаданных карточки и не требует проектировать схему и загружать её в БД.

Добавляемые метаданные могут быть одного из двух типов: _динамические_ или _расширенные_.

.Разные типы метаданных хранятся в БД по-разному:
* Значения _динамических_ полей одинакового типа для всех типов карточек сохраняются в одной таблице.
* _Расширенные_ поля сохраняются в таблицах основных секций. Для расширенных секций в БД создаются таблицы, аналогичные таблицам статических метаданных вида `dvtable_\ИД-секции`.

Администратор {dv} может переключить БД с используемых по умолчанию динамических метаданных на расширенные.

WARNING: Переход с расширенных на динамические метаданные невозможен.

[NOTE]
====
Переход с _динамических_ на _расширенные_ поля рекомендуется выполнять в следующих случаях:

- Когда в базе данных планируется хранить большое (десятки тысяч) количество карточек, в которых есть _динамические_ поля.
- Когда планируется использовать сложные роли с добавляемыми полями.
====

Использование _расширенных_ полей позволит повысить производительность работы базы данных за счет увеличения скорости чтения и сохранения данных всех карточек, где используются добавляемые поля, ускорить построение отчётов и выполнение других операций с карточками.

После перевода базы на расширенные метаданные, модификация метаданных в _Конструкторе разметок_ будет приводить к изменению или добавлению таблиц и может занимать продолжительное время (до нескольких минут, в зависимости от загруженности базы данных).

.После перевода базы на расширенные метаданные потребуется обновить (актуализировать названия таблиц, полей):
- Код хранимых процедур.
- Код собственных процедур, разработанных для ролевой модели.
- Код других собственных скриптов, если в них выполняется низкоуровневая работа (на уровне БД) с данными карточек, использующих расширенные метаданные.

Для перевода БД с динамических на расширенные метаданные (необратимая операция), используйте флаг *Используются расширенные метаданные* при настройке xref:db-config.adoc#metadata[Метаданных] для БД.

.Настройка метаданных в {of-mc}
image::dev@platform:admin:control-panel-metadata.png[Настройка метаданных в {of-mc}]

Если индексы полнотекстового поиска были созданы при использовании в БД _динамических_ полей, после перевода БД на _расширенные_ метаданные, повторно создайте индексы, чтобы продолжить использовать полнотекстовый поиск.
