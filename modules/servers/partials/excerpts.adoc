//tag::dbSettings[]
****
// tag::servertype[]
Тип сервера:::
Тип сервера БД из xref:install-linux:ROOT:requirements-database.adoc[списка] поддерживаемых баз данных:
+
* *_{mssql} Server_*.
* *_{pgsql}_*.
// end::servertype[]

// tag::servername[]
Имя сервера:::
Сетевое имя сервера или экземпляра СУБД, например `sql.company.com`.
+
Для БД {pgsql} имя сервера следует указывать без домена, например `postgre`, а не `postgre.company.com`. Не следует использовать IP и имя LOCALHOST.
// end::servername[]

Порт:::
*Только для {pgsql}*. Порт подключения к СУБД, в {pgsql} по умолчанию используется порт `5432`.

Проверка подлинности:::
Тип проверки подлинности при подключении к СУБД:
* *_SQL Server_* -- аутентификация с помощью учетной записи, зарегистрированной в СУБД.
* *_Windows_* -- аутентификация с помощью текущей учетной записи Windows.
+
[NOTE]
====
См. также xref:db-authentication.adoc[Особенности использования SQL-аутентификация и аутентификация Windows при подключении к БД {dv}].
====

Логин, Пароль:::
Данные учетной записи для подключения к СУБД.
****
//end::dbSettings[]

//tag::name[]
// tag::dbname[]
Имя:::
Название БД в СУБД.
// end::dbname[]

// tag::dbalias[]
Псевдоним:::
Идентификатор, по которому идёт обращение к БД из клиентских программ. Обычно совпадает с именем БД.
+
[WARNING]
====
Псевдоним должен быть уникальным в пределах данного сервера {dv}.
====
// end::dbalias[]
//end::name[]

// tag::location[]
Размещение:::
*Только для {mssql}.* Определяет расположение файлов БД на сервере СУБД:
+
* *_Стандартное_* -- расположение файлов определяется настройками СУБД.
* *_Другое_* -- расположение файлов БД указывается администратором. Данный вариант размещения применим, если серверная часть модуля {pl} и СУБД установлены на одном компьютере.

Язык:::
Язык создаваемой БД. Следует выбирать локаль, соответствующую способу сортировки данных в таблицах. Способ сортировки задан в параметре `Server Collation ()` экземпляра {mssql} Server. Рекомендуемое значение: `Cyrillic_General_CI_AS` (Русский).
+
*Параметр используется только для {mssql}.*
// tag::location[]

// tag::options[]
Опции:::
*Только для БД {mssql}*. Параметр для изменения конфигурации сателлитных баз данныхfootnote:[Только при подключении БД {dv} версии 5.4 и использования отдельных служебных таблиц. Подробнее см. разделы "xref:db-satellite.adoc[]" и "xref:db-service-tables.adoc[]".]. По умолчанию использование сателлитных БД отключено, при необходимости создание сателлитных баз данных можно включить.
+
При подключении БД {dv} сохраняется существующая в данной БД конфигурация сателлитных БД и служебных таблиц.
+
[WARNING]
====
// tag::sat-warn[]
При подключении существующей БД будет применена существующая в данной БД конфигурация сателлитов. Данные из основной БД в сателлитную и обратно не переносятся, поэтому при переключении БД часть данных может быть потеряна.
// end::sat-warn[]
====
+
*Параметр используется только для {mssql}.* Подробная информация о сателлитных БД приведена в разделе "xref:db-satellite.adoc[]".
// end::options[]

// tag::maindb[]
Основная БД -- база данных, с которой работают пользователи, если при подключении к серверу не выбрана иная БД. Сервисы {dv} также работают с основной БД.
// end::maindb[]

// tag::store-time[]
* *Выгружать/очищать сообщения журнала старше, чем N дней* -- записи старше указанного срока будут удаляться. Значение по умолчанию: `7` дней.
* *Выгружать/очищать журнал, оставив в нем NN сообщений)* -- старые записи будут удаляться, а указанное количество новых записей будет оставлено. Значение по умолчанию: `30000` сообщений.
+
В данном режиме может остаться большее число записей, чем указано в настройке. Записи суммируются по дням, пока не будет достигнуто указанное значение, но число записей не округляется до указанного значения и может его превысить. Записи за самый крайний день будут оставлены полностью.
// end::store-time[]

//tag::delete-wf-settings[]
Если БД была удалена через _{mc}_, при открытии раздела _{wf}_ появится запрос на удаление настроек, связанных с удалённой БД: "База данных не зарегистрирована в системе {dv}. Удалить настройки {wf}, связанные с базой данных"?

Если согласиться с предложением, соответствующие настройки будут удалены. При отказе от предложения настройки сохранятся, но для БД будет выставлен признак отключения обработки БП.
//end::delete-wf-settings[]

Не отображать карточки Делопроизводства 4X:::
Флаг перемещён в настройки БД, на страницу настроек xref:db-config.adoc#management["Управление"]
+
.Если флаг активен:
- Карточки приложения _{to}_ не будут отображаться и предлагаться при выборе в {wincl}е и РМА и системной папке `Карточки`.
- Справочники _{to}_ не будут отображаться в папке `Конструкторы и справочники`.
- В конструкторах запросов и представлений не будут выводиться поля и секции карточек _Делопроизводство 4X_.
+
[WARNING]
====
При использовании БД {pgsql} работа с карточками _{to}_ не поддерживается. В данном случае флаг *_Не отображать карточки Делопроизводства 4X_* должен быть установлен обязательно.

При смене xref:db-settings.adoc[базы данных] флаг *_Не отображать карточки Делопроизводства 4.X_* сбрасывается и должен быть установлен повторно.
====

// tag::takeoffice[]
Не отображать карточки Делопроизводства 4X:::
Флаг регулирует отображение карточек модуля "Делопроизводство 4X"
+
.Если флаг активен:
* Карточки приложения _{to}_ не будут отображаться и предлагаться при выборе в {wincl}е и РМА и системной папке `Карточки`.
* Справочники _{to}_ не будут отображаться в папке `Конструкторы и справочники`.
* В конструкторах запросов и представлений не будут выводиться поля и секции карточек _Делопроизводство 4X_.
+
[WARNING]
====
При использовании БД {pgsql} работа с карточками _{to}_ не поддерживается. В данном случае флаг *_Не отображать карточки Делопроизводства 4X_* должен быть установлен обязательно.

При смене xref:db-settings.adoc[базы данных] флаг *_Не отображать карточки Делопроизводства 4.X_* сбрасывается и должен быть установлен повторно.
====
// end::takeoffice[]

// tag::dbindex[]
Индексирование:::
Признак полнотекстового индексирования: используется/не используется.
// end::dbindex[]

// tag::dbversion[]
Версия:::
Версия базы данных.
// end::dbversion[]

// tag::dbupdate[]
Дата обновления:::
Дата последнего обновления.
// end::dbupdate[]

// tag::dbcreated[]
Создано:::
Дата создания БД.
// end::dbcreated[]

// tag::dbdefault[]
По умолчанию:::
БД, к которой по умолчанию подключаются клиентские программы и сервисы {dv}, выделяется жирным шрифтом.
// end::dbdefault[]

// tag::dboff[]
Отключено:::
Признак отключенной БД, если в БД установлен флаг `DISABLE`.
// end::dboff[]

// tag::actionbuttons[]
Кнопки действия:::
Кнопки выполнения действий с БД:
+
* *Обновить* -- запускает xref:db-update.adoc[мастер обновления БД].
* *Отключить* -- устанавливает признак отключенной БД, флаг `DISABLE` в БД.
* *Назначить* -- назначает БД для работы по умолчанию.
include::partial$excerpts.adoc[tags=maindb]
// end::actionbuttons[]

// tag::ten-min[]
Новая конфигурация будет применена в течение 10 минут (по умолчанию).
// end::ten-min[]

// tag::atomic[]
--
Параметр _Ожидать завершения атомарной операции на SQL Server (сек)_ определяет максимальное время ожидания завершения отдельного этапа (операции) процедуры создания или подключения БД. Если операция не будет выполнена за указанное время, она завершится с ошибкой.

[NOTE]
====
Параметр _Ожидать завершения атомарной операции на SQL Server (сек)_ не ограничивает время выполнения пользовательских операций при работе в {wincl}е или {wc}е. при работе в клиентских приложениях будет применяться стандартное ограничение `600 секунд`.
====
--
// end::atomic[]

// tag::twobasesonepath[]
[WARNING]
====
* При настройке собственных хранилищ с отличными от стандартных путями, существует возможность указать одинаковые пути для разных БД. Чтобы избежать нежелательного удаления всех основных или архивных файлов с закончившимся сроком хранения для сразу двух БД, не рекомендуется указывать одинаковые пути в настройках для хранилищ разных БД.
* Когда *{sss-new}* и *{fss-new}* запущены под разными учётными записями и используются пути по умолчанию, например, `%TEMP%` для временного хранилища, возможны случаи неудаления файлов с закончившимся сроком хранения. Причина в разных относительных путях для разных УЗ.
+
Чтобы избежать подобной ситуации, указывайте абсолютный путь к временному хранилищу и обеспечивайте необходимый доступ по этому пути для обоих учетных записей. Также можно запускать *{sss-new}* и *{fss-new}* под одной учетной записью.
====
// end::twobasesonepath[]

// tag::nofs[]
Вытеснение файлов в _Filestream хранилище в базе данных {dv}_ и _FileStream хранилище во внешней базе данных {mssql} Server_ поддерживается только для СУБД {mssql} и только, когда сервер {dv} работает под ОС Windows. При работе сервера под ОС Linux функциональность недоступна.
// end::nofs[]

// tag::storageLimits[]
* Для СУБД {mssql} Server существует ограничение на размер добавляемых файлов -- не более 2 Гб. Если в {dv} необходимо хранить файлы больше 2 Гб, используйте *_Хранилище на диске_*, *_Filestream хранилище в базе данных {dv}_*, *_FileStream хранилище во внешней базе данных {mssql} Server_* или другое хранилище, поддерживающее файлы такого размера.
+
Для СУБД {pgsql} аналогичное ограничение составляет 1 Гб.
// end::storageLimits[]

// tag::tenMin[]
Новая конфигурация будет применена в течение 10 минут (по умолчанию).
// end::tenMin[]

// tag::openStorages[]
// tag::openStorageSettings[]
. В {of-mc} выберите настраиваемую базу данных на странице menu:Серверы[Имя-сервера > Сервер приложений > Базы данных] и нажмите на строку нужной базы данных.
. Настройте параметры в группе _Внешние хранилища_ при настройке xref:db-config.adoc#storage[свойств БД].
// end::openStorageSettings[]
. Нажмите на кнопку image:buttons/plus.png[Плюс] в столбце настроек
ifdef::storageorgroup[]
_Хранилища_, чтобы открыть окно _Настройки хранилища_.
endif::[]
ifdef::create[]
_Группы хранилищ_, чтобы открыть окно _Настройки группы хранилищ_.
endif::[]
ifdef::include[]
_Группы хранилищ_, чтобы открыть окно _Выбор хранилища_.
endif::[]
ifdef::rules[]
_Правила помещения в хранилища_, чтобы открыть окно _Настройки правила хранилища_.
endif::[]
// end::openStorages[]

// tag::fStream[]
.. В поле _Строка соединения_ введите строку формата
include::partial$excerpts.adoc[tags=connectionLine]
+
.. В поле _Папка (локальная на сервере баз данных)_ введите полный путь к каталогу на сервере СУБД, на который настроен FileStream.
.. При желании измените максимальное время ожидания ответа от СУБД в поле _Таймаут (с)._
// end::fStream[]

// tag::connectionLine[]
ifdef::storageorgroup[]
`Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=UserPassword`.
+
Строка должна содержать данные для подключения к внешней БД (по отношению к БД {dv}). В указанную внешнюю БД будут сохраняться бинарные данные файлов.
+
endif::[]
ifndef::storageorgroup[]
`Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=UserPassword;Integrated Security=SSPI`.
+
.Где:
* `ServerName` замените на полное имя сервера с СУБД {mssql}.
* `DatabaseName` замените на название базы данных с FileStream.
* `UserName` и `UserPassword` замените на имя и пароль пользователя, который обладает правами на работу с базой данных `DatabaseName`.
+
endif::[]
WARNING: Не указывайте текущую или любую другую БД {dv} -- это может привести к поломке БД.
// end::connectionLine[]
